# Security Configuration for Actions Config Auto Manager
# 符合非常安全使用的完整完全无人化自动化操作配置

# 安全级别
security_level: high

# 访问控制
access_control:
  # 最小权限原则
  principle: least_privilege
  
  # 权限设置
  permissions:
    # 工作流权限
    workflows:
      read: true
      write: true
    
    # 代码权限
    contents:
      read: true
      write: true
    
    # Pull Request权限
    pull_requests:
      read: true
      write: false
    
    # 问题权限
    issues:
      read: true
      write: false
    
    # 仓库权限
    repository-projects:
      read: false
      write: false
    
    # 部署权限
    deployments:
      read: true
      write: true

# 安全扫描配置
security_scan:
  # 扫描频率
  frequency: daily
  
  # 扫描类型
  types:
    - code_scan
    - dependency_scan
    - secret_scan
    - workflow_scan
  
  # 扫描工具
  tools:
    - name: codeql
      version: v3
      enabled: true
    
    - name: dependency-review
      version: v4
      enabled: true
    
    - name: git-secrets
      version: latest
      enabled: true
    
    - name: yamllint
      version: latest
      enabled: true

# 加密配置
encryption:
  # 敏感信息处理
  sensitive_data:
    # 是否加密敏感信息
    encrypt: true
    
    # 加密方法
    method: aes-256-gcm
    
    # 密钥管理
    key_management:
      # 密钥存储位置
      storage: environment_variable
      
      # 密钥轮换
      rotation: 30d

# 备份配置
backup:
  # 备份频率
  frequency: daily
  
  # 备份保留时间
  retention:
    days: 30
    
  # 备份存储
  storage:
    # 本地备份
    local:
      enabled: true
      path: ".github/actions-config/backup"
    
    # 远程备份
    remote:
      enabled: false
      # 远程存储配置
      # 注意：请在实际使用时配置远程存储

# 监控配置
monitoring:
  # 监控频率
  frequency: realtime
  
  # 监控指标
  metrics:
    - workflow_runs
    - error_rate
    - security_issues
    - performance
  
  # 告警配置
  alerts:
    # 安全告警
    security:
      enabled: true
      threshold: high
      
    # 错误告警
    errors:
      enabled: true
      threshold: medium
      
    # 性能告警
    performance:
      enabled: false
      threshold: low

# 审计配置
audit:
  # 审计日志
  logging:
    enabled: true
    
    # 日志存储
    storage:
      path: ".github/automation/logs"
      retention: 90d
  
  # 审计频率
  frequency: realtime

# 恢复配置
recovery:
  # 灾难恢复
  disaster_recovery:
    enabled: true
    
    # 恢复点目标
    rpo: 1h
    
    # 恢复时间目标
    rto: 4h

# 合规配置
compliance:
  # 合规标准
  standards:
    - name: GDPR
      enabled: true
    
    - name: SOC2
      enabled: false
    
    - name: ISO27001
      enabled: false

# 自修复配置
auto_healing:
  # 是否启用自修复
  enabled: true
  
  # 修复策略
  strategy:
    # 自动修复安全问题
    security_issues: true
    
    # 自动修复错误
    errors: true
    
    # 自动修复性能问题
    performance_issues: false

# 安全最佳实践
best_practices:
  # 使用最新版本的actions
  use_latest_actions: true
  
  # 避免硬编码敏感信息
  no_hardcoded_secrets: true
  
  # 使用环境变量存储敏感信息
  use_environment_variables: true
  
  # 限制actions的权限
  restrict_action_permissions: true
  
  # 定期更新依赖
  update_dependencies: true
  
  # 定期清理旧数据
  cleanup_old_data: true

# 安全例外
security_exceptions:
  # 例外列表
  exceptions:
    # 示例例外
    # - name: example_exception
    #   reason: "临时例外，用于测试"
    #   expiration: "2026-12-31"
