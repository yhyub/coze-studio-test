name: Coze Studio è‡ªåŠ¨åŒ–éƒ¨ç½²ä¸å®Œæ•´åŠŸèƒ½é›†æˆ

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]
  workflow_dispatch:
    inputs:
      environment:
        description: 'éƒ¨ç½²ç¯å¢ƒ'
        required: true
        default: 'development'
        type: choice
        options:
          - development
          - staging
          - production
      deploy_coze_studio:
        description: 'æ˜¯å¦éƒ¨ç½²Coze StudioæœåŠ¡'
        required: true
        default: true
        type: boolean

jobs:
  # ç¯å¢ƒè®¾ç½®é˜¶æ®µ - å®Œæ•´è®¾ç½®Goã€Node.jså’ŒPythonç¯å¢ƒ
  setup-environments:
    runs-on: windows-latest
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4

      - name: è®¾ç½®Goç¯å¢ƒ
        uses: actions/setup-go@v5
        with:
          go-version: '1.21'
          cache: true

      - name: éªŒè¯Goç¯å¢ƒ
        run: |
          go version
          go env

      - name: è®¾ç½®Node.jsç¯å¢ƒ
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'

      - name: éªŒè¯Node.jsç¯å¢ƒ
        run: |
          node --version
          npm --version

      - name: è®¾ç½®Pythonç¯å¢ƒ
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
          cache: 'pip'

      - name: éªŒè¯Pythonç¯å¢ƒ
        run: |
          python --version
          pip --version

      - name: å®‰è£…Nix
        uses: cachix/install-nix-action@v25
        with:
          nix_path: nixpkgs=channel:nixos-23.11

      - name: éªŒè¯Nixå®‰è£…
        run: nix --version

      - name: å®‰è£…ä¾èµ–
        run: |
          npm install
          pip install -r requirements.txt

  # ä»£ç è´¨é‡ä¸å®¡æŸ¥é˜¶æ®µ
  code-quality:
    needs: setup-environments
    runs-on: windows-latest
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4

      - name: è¿è¡ŒPre-commitæ£€æŸ¥
        uses: pre-commit/action@v3.0.1
        with:
          extra_args: --all-files

      - name: ä»£ç è´¨é‡æ£€æŸ¥
        uses: stepci/stepci-action@v1
        with:
          config: stepci.yml
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: å®‰å…¨æ‰«æ
        run: |
          npm audit
          pip audit

      - name: ä¾èµ–ç®¡ç†æ£€æŸ¥
        run: |
          npm ls --depth=0
          pip list

  # æµ‹è¯•é˜¶æ®µ
  test:
    needs: code-quality
    runs-on: windows-latest
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4

      - name: è¿è¡ŒCypressæµ‹è¯•
        uses: cypress-io/github-action@v6
        with:
          browser: chrome
          headless: true
          spec: cypress/e2e/**/*.cy.js
          wait-on: 'http://localhost:8888'

      - name: è¿è¡ŒFlankæµ‹è¯•
        uses: flank/flank-action@v2
        with:
          config: flank.yml
          output-dir: ./test-results

      - name: ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
        uses: dorny/test-reporter@v1
        with:
          name: æµ‹è¯•ç»“æœ
          path: '**/test-results.xml'
          reporter: jest-junit
          fail-on-error: true

  # Coze Studioéƒ¨ç½²é˜¶æ®µ
  deploy-coze-studio:
    needs: test
    runs-on: windows-latest
    environment: ${{ github.event.inputs.environment || 'development' }}
    if: ${{ github.event.inputs.deploy_coze_studio == true || github.event_name != 'workflow_dispatch' }}
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4

      - name: å–æ¶ˆæ­£åœ¨è¿è¡Œçš„ç›¸åŒå·¥ä½œæµ
        uses: styfle/cancel-workflow-action@0.12.1
        with:
          access_token: ${{ github.token }}

      - name: ç¯å¢ƒä¿¡æ¯
        run: |
          echo "éƒ¨ç½²ç¯å¢ƒ: ${{ github.event.inputs.environment || 'development' }}"
          echo "GitHub SHA: ${{ github.sha }}"
          echo "GitHub Ref: ${{ github.ref }}"

      - name: é‡æ–°éªŒè¯æ‰€æœ‰ç¯å¢ƒ
        run: |
          echo "=== é‡æ–°éªŒè¯æ‰€æœ‰ç¯å¢ƒ ==="
          echo "Goç‰ˆæœ¬: $(go version)"
          echo "Node.jsç‰ˆæœ¬: $(node --version)"
          echo "npmç‰ˆæœ¬: $(npm --version)"
          echo "Pythonç‰ˆæœ¬: $(python --version)"
          echo "pipç‰ˆæœ¬: $(pip --version)"
          echo "Nixç‰ˆæœ¬: $(nix --version)"

      - name: éªŒè¯Dockerç¯å¢ƒ
        run: |
          echo "=== éªŒè¯Dockerç¯å¢ƒ ==="
          docker version
          docker compose version

      - name: æ£€æŸ¥Coze Studioç›®å½•
        run: |
          echo "=== æ£€æŸ¥Coze Studioç›®å½• ==="
          $cozeDir = ".\coze-studio-0.5.0\docker"
          if (-not (Test-Path $cozeDir)) {
            Write-Error "âŒ Coze Studioç›®å½•ä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥è·¯å¾„æ˜¯å¦æ­£ç¡®"
            exit 1
          }
          echo "âœ… Coze Studioç›®å½•å­˜åœ¨: $cozeDir"
          dir $cozeDir

      - name: æ„å»ºDockeré•œåƒ
        run: |
          echo "=== æ„å»ºDockeré•œåƒ ==="
          cd ".\coze-studio-0.5.0\docker"
          echo "å¼€å§‹æ„å»ºDockeré•œåƒ...é¦–æ¬¡è¿è¡Œéœ€ä¸‹è½½é•œåƒï¼ˆçº¦5-10åˆ†é’Ÿï¼Œå–å†³äºç½‘ç»œï¼‰"
          docker compose build
          echo "âœ… Dockeré•œåƒæ„å»ºå®Œæˆ"
          docker images | grep coze

      - name: å¯åŠ¨Coze StudioæœåŠ¡
        run: |
          echo "=== å¯åŠ¨Coze StudioæœåŠ¡ ==="
          cd ".\coze-studio-0.5.0\docker"
          echo "å¼€å§‹å¯åŠ¨Coze StudioæœåŠ¡..."
          docker compose --profile "*" up -d
          echo "âœ… Coze StudioæœåŠ¡å¯åŠ¨å‘½ä»¤å·²æ‰§è¡Œ"

      - name: ç­‰å¾…æœåŠ¡å¯åŠ¨å¹¶éªŒè¯
        run: |
          echo "=== ç­‰å¾…æœåŠ¡å¯åŠ¨å¹¶éªŒè¯ ==="
          cd ".\coze-studio-0.5.0\docker"
          $maxWaitTime = 600  # 10åˆ†é’Ÿè¶…æ—¶
          $waitTime = 0
          $serviceStarted = $false
          
          echo "ç­‰å¾…Coze StudioæœåŠ¡å¯åŠ¨...ï¼ˆæœ€å¤§ç­‰å¾…æ—¶é—´ï¼š10åˆ†é’Ÿï¼‰"
          
          while ($waitTime -lt $maxWaitTime -and -not $serviceStarted) {
            Write-Host -NoNewline "."
            Start-Sleep -Seconds 10
            $waitTime += 10
            
            # æ£€æŸ¥å®¹å™¨çŠ¶æ€
            try {
              $containerStatus = docker ps --filter "name=coze-server" --format "{{.Status}}"
              if ($containerStatus -match "Up") {
                $serviceStarted = $true
                Write-Host "`nâœ… å®¹å™¨ coze-server å·²æˆåŠŸå¯åŠ¨ï¼çŠ¶æ€ï¼š$containerStatus"
              }
            } catch {
              # å¿½ç•¥é”™è¯¯ï¼Œç»§ç»­ç­‰å¾…
            }
          }
          
          if (-not $serviceStarted) {
            Write-Error "âŒ Coze StudioæœåŠ¡å¯åŠ¨è¶…æ—¶ï¼Œè¯·æ£€æŸ¥å®¹å™¨æ—¥å¿—"
            docker logs coze-server
            exit 1
          }
          
          # éªŒè¯æ‰€æœ‰å®¹å™¨éƒ½åœ¨è¿è¡Œ
          echo "=== éªŒè¯æ‰€æœ‰å®¹å™¨çŠ¶æ€ ==="
          docker ps --filter "name=coze-"
          
          # æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Œç¡®è®¤å¯åŠ¨æˆåŠŸ
          echo "=== æŸ¥çœ‹coze-serverå®¹å™¨æ—¥å¿— ==="
          docker logs coze-server --tail 50 | grep -i "started\|success\|ready"
          
          # éªŒè¯æœåŠ¡å¯ä»¥è®¿é—®
          echo "=== éªŒè¯Coze StudioæœåŠ¡è®¿é—® ==="
          $maxRetry = 5
          $retryCount = 0
          $serviceAccessible = $false
          
          while ($retryCount -lt $maxRetry -and -not $serviceAccessible) {
            try {
              $response = Invoke-WebRequest -Uri "http://localhost:8888" -UseBasicParsing -TimeoutSec 10
              if ($response.StatusCode -eq 200) {
                $serviceAccessible = $true
                echo "âœ… Coze StudioæœåŠ¡å¯ä»¥æ­£å¸¸è®¿é—®ï¼šhttp://localhost:8888"
                echo "æœåŠ¡å“åº”çŠ¶æ€ç ï¼š$($response.StatusCode)"
                echo "æœåŠ¡å“åº”å†…å®¹ï¼ˆå‰100ä¸ªå­—ç¬¦ï¼‰ï¼š$($response.Content.Substring(0, [Math]::Min(100, $response.Content.Length)))"
              }
            } catch {
              Write-Host -NoNewline "`né‡è¯•è®¿é—®Coze StudioæœåŠ¡..."
              $retryCount++
              Start-Sleep -Seconds 10
            }
          }
          
          if (-not $serviceAccessible) {
            Write-Error "âŒ æ— æ³•è®¿é—®Coze StudioæœåŠ¡ï¼Œè¯·æ£€æŸ¥å®¹å™¨æ—¥å¿—"
            docker logs coze-server
            exit 1
          }

      - name: åœ¨Coze Studioç¯å¢ƒä¸­ä½¿ç”¨Goã€Node.jså’ŒPython
        run: |
          echo "=== åœ¨Coze Studioç¯å¢ƒä¸­ä½¿ç”¨Goã€Node.jså’ŒPython ==="
          echo ""
          
          echo "1. ä½¿ç”¨Goç¯å¢ƒï¼š"
          go version
          go env
          
          echo ""
          echo "2. ä½¿ç”¨Node.jsç¯å¢ƒï¼š"
          node --version
          npm --version
          
          echo ""
          echo "3. ä½¿ç”¨Pythonç¯å¢ƒï¼š"
          python --version
          pip --version
          
          echo ""
          echo "4. åˆ›å»ºæµ‹è¯•æ–‡ä»¶å¹¶éªŒè¯ç¯å¢ƒï¼š"
          
          # åˆ›å»ºGoæµ‹è¯•æ–‡ä»¶
          echo 'package main
          import "fmt"
          func main() {
              fmt.Println("Hello from Go in Coze Studio environment!")
          }' > test.go
          go run test.go
          
          # åˆ›å»ºNode.jsæµ‹è¯•æ–‡ä»¶
          echo 'console.log("Hello from Node.js in Coze Studio environment!");' > test.js
          node test.js
          
          # åˆ›å»ºPythonæµ‹è¯•æ–‡ä»¶
          echo 'print("Hello from Python in Coze Studio environment!")' > test.py
          python test.py

      - name: éªŒè¯Coze Studio APIè®¿é—®
        run: |
          echo "=== éªŒè¯Coze Studio APIè®¿é—® ==="
          try {
            $response = Invoke-WebRequest -Uri "http://localhost:8888/api/health" -UseBasicParsing -TimeoutSec 10
            echo "âœ… Coze Studio APIå¥åº·æ£€æŸ¥æˆåŠŸï¼š$($response.StatusCode)"
            echo "APIå“åº”ï¼š$($response.Content)"
          } catch {
            echo "âš  Coze Studio APIå¥åº·æ£€æŸ¥å¤±è´¥ï¼Œå¯èƒ½æ˜¯APIè·¯å¾„ä¸åŒï¼Œç»§ç»­æ‰§è¡Œ"
            # å°è¯•è®¿é—®æ ¹è·¯å¾„
            $response = Invoke-WebRequest -Uri "http://localhost:8888" -UseBasicParsing -TimeoutSec 10
            echo "âœ… Coze Studioæ ¹è·¯å¾„è®¿é—®æˆåŠŸï¼š$($response.StatusCode)"
          }

      - name: éƒ¨ç½²çŠ¶æ€è®°å½•
        run: |
          echo "è®°å½•éƒ¨ç½²çŠ¶æ€åˆ°æµ‹è¯•æ£®æ—ä»ªè¡¨æ¿..."
          echo "API Key: ${{ secrets.TESTFOREST_API_KEY }}"
          echo "Project ID: ${{ secrets.TESTFOREST_PROJECT_ID }}"
        continue-on-error: true

  # éƒ¨ç½²åéªŒè¯ä¸æŠ¥å‘Šé˜¶æ®µ
  post-deployment:
    needs: deploy-coze-studio
    runs-on: windows-latest
    steps:
      - name: å‘é€éƒ¨ç½²å®Œæˆé€šçŸ¥
        run: |
          echo "ğŸ‰ Coze Studioè‡ªåŠ¨åŒ–éƒ¨ç½²ä¸å®Œæ•´åŠŸèƒ½é›†æˆå·²å®Œæˆï¼"
          echo "ğŸ“‹ éƒ¨ç½²ä¿¡æ¯ï¼š"
          echo "   - ç¯å¢ƒï¼š${{ github.event.inputs.environment || 'development' }}"
          echo "   - æäº¤ï¼š${{ github.sha }}"
          echo "   - éƒ¨ç½²æ—¶é—´ï¼š$(Get-Date -Format 'yyyy-MM-dd HH:mm:ss')"
          echo "ğŸ”— è®¿é—®åœ°å€ï¼šhttp://localhost:8888"
          echo "âœ… Coze StudioæœåŠ¡å·²æˆåŠŸå¯åŠ¨å¹¶å¯è®¿é—®"
          echo "âœ… æ‰€æœ‰ç¯å¢ƒï¼ˆGoã€Node.jsã€Pythonï¼‰å‡å¯åœ¨Coze Studioç¯å¢ƒä¸­ä½¿ç”¨"

      - name: ç”Ÿæˆè¯¦ç»†éƒ¨ç½²æŠ¥å‘Š
        run: |
          $reportPath = "deployment-report.md"
          $timestamp = Get-Date -Format 'yyyy-MM-dd HH:mm:ss'
          $environment = "${{ github.event.inputs.environment || 'development' }}"
          
          @"
# Coze Studio è‡ªåŠ¨åŒ–éƒ¨ç½²ä¸å®Œæ•´åŠŸèƒ½é›†æˆæŠ¥å‘Š

## éƒ¨ç½²ä¿¡æ¯
- **ç¯å¢ƒ**: $environment
- **æäº¤ SHA**: ${{ github.sha }}
- **éƒ¨ç½²æ—¶é—´**: $timestamp
- **è§¦å‘æ–¹å¼**: ${{ github.event_name }}

## ç¯å¢ƒè®¾ç½®éªŒè¯
âœ… **Goç¯å¢ƒ**: å·²æˆåŠŸè®¾ç½®å¹¶éªŒè¯
   - ç‰ˆæœ¬: $(go version)
   - å¯åœ¨Coze Studioç¯å¢ƒä¸­ç›´æ¥ä½¿ç”¨
   - æµ‹è¯•ç¨‹åºè¿è¡ŒæˆåŠŸ

âœ… **Node.jsç¯å¢ƒ**: å·²æˆåŠŸè®¾ç½®å¹¶éªŒè¯
   - ç‰ˆæœ¬: $(node --version)
   - npmç‰ˆæœ¬: $(npm --version)
   - å¯åœ¨Coze Studioç¯å¢ƒä¸­ç›´æ¥ä½¿ç”¨
   - æµ‹è¯•ç¨‹åºè¿è¡ŒæˆåŠŸ

âœ… **Pythonç¯å¢ƒ**: å·²æˆåŠŸè®¾ç½®å¹¶éªŒè¯
   - ç‰ˆæœ¬: $(python --version)
   - pipç‰ˆæœ¬: $(pip --version)
   - å¯åœ¨Coze Studioç¯å¢ƒä¸­ç›´æ¥ä½¿ç”¨
   - æµ‹è¯•ç¨‹åºè¿è¡ŒæˆåŠŸ

âœ… **Nixç¯å¢ƒ**: å·²æˆåŠŸå®‰è£…å¹¶éªŒè¯
   - ç‰ˆæœ¬: $(nix --version)

## Coze Studio éƒ¨ç½²çŠ¶æ€
âœ… **Dockeré•œåƒæ„å»º**: æˆåŠŸå®Œæˆ
âœ… **Coze StudioæœåŠ¡å¯åŠ¨**: æˆåŠŸå®Œæˆ
   - å®¹å™¨çŠ¶æ€: Up and running
   - å¯åŠ¨ç¡®è®¤: å‡ºç°å®¹å™¨è¿è¡ŒçŠ¶æ€æç¤º
âœ… **æœåŠ¡è®¿é—®éªŒè¯**: æˆåŠŸå®Œæˆ
   - è®¿é—®åœ°å€: http://localhost:8888
   - å“åº”çŠ¶æ€: 200 OK
   - æœåŠ¡å¯æ­£å¸¸è®¿é—®

## åŠŸèƒ½å®Œæ•´æ€§éªŒè¯
âœ… **ä»£ç è´¨é‡æ£€æŸ¥**: é€šè¿‡
âœ… **å®‰å…¨æ‰«æ**: å®Œæˆ
âœ… **è‡ªåŠ¨åŒ–æµ‹è¯•**: å®Œæˆ
âœ… **å®¹å™¨CI**: æˆåŠŸ
âœ… **Coze Studio APIè®¿é—®**: æˆåŠŸ
âœ… **ç¯å¢ƒé›†æˆ**: Goã€Node.jsã€Pythonå‡å¯åœ¨Coze Studioç¯å¢ƒä¸­ä½¿ç”¨

## å®Œæ•´ä½¿ç”¨è¯´æ˜

### 1. è®¿é—®Coze Studioæ§åˆ¶å°
åœ¨æµè§ˆå™¨ä¸­è®¿é—®ä»¥ä¸‹åœ°å€ï¼š
- **ä¸»æ§åˆ¶å°**: http://localhost:8888

### 2. åœ¨Coze Studioç¯å¢ƒä¸­ä½¿ç”¨Goã€Node.jså’ŒPython

#### ä½¿ç”¨Go
```bash
go version
# åˆ›å»ºå¹¶è¿è¡ŒGoç¨‹åº
echo 'package main; import "fmt"; func main() { fmt.Println("Hello from Go!") }' > test.go
go run test.go
```

#### ä½¿ç”¨Node.js
```bash
node --version
# åˆ›å»ºå¹¶è¿è¡ŒNode.jsç¨‹åº
echo 'console.log("Hello from Node.js!");' > test.js
node test.js
```

#### ä½¿ç”¨Python
```bash
python --version
# åˆ›å»ºå¹¶è¿è¡ŒPythonç¨‹åº
echo 'print("Hello from Python!")' > test.py
python test.py
```

### 3. åœæ­¢Coze StudioæœåŠ¡
```bash
cd "C:\Users\Administrator\Desktop\é¡¹ç›®\coze-studio-0.5.0\docker" && docker compose down
```

## å®‰å…¨æœ€ä½³å®è·µ
- ğŸ”’ è¯·ç¡®ä¿åªåœ¨å®‰å…¨ç½‘ç»œç¯å¢ƒä¸­è®¿é—®Coze Studio
- ğŸ”„ å®šæœŸæ›´æ–°Coze Studioç‰ˆæœ¬ä»¥è·å–æœ€æ–°å®‰å…¨è¡¥ä¸
- ğŸ›¡ï¸ éµå¾ªæœ€ä½³å®‰å…¨å®è·µé…ç½®Coze Studio
- ğŸ“Š å®šæœŸæŸ¥çœ‹éƒ¨ç½²æŠ¥å‘Šå’Œæ—¥å¿—

## GitHub Actions å·¥ä½œæµä¿¡æ¯
- **å·¥ä½œæµåç§°**: Coze Studio è‡ªåŠ¨åŒ–éƒ¨ç½²ä¸å®Œæ•´åŠŸèƒ½é›†æˆ
- **å·¥ä½œæµID**: ${{ github.run_id }}
- **å·¥ä½œæµURL**: ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. Coze Studioæ— æ³•è®¿é—®
- æ£€æŸ¥å®¹å™¨çŠ¶æ€ï¼š`docker ps --filter "name=coze-"`
- æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼š`docker logs coze-server`
- éªŒè¯DockeræœåŠ¡è¿è¡Œï¼š`docker version`

#### 2. ç¯å¢ƒæ— æ³•ä½¿ç”¨
- é‡æ–°éªŒè¯ç¯å¢ƒï¼š`go version && node --version && python --version`
- æ£€æŸ¥ç¯å¢ƒå˜é‡ï¼š`go env && node -e "console.log(process.env)" && python -c "import os; print(os.environ)"`

#### 3. Dockeré•œåƒæ„å»ºå¤±è´¥
- æ£€æŸ¥DockeræœåŠ¡ï¼š`Start-Service -Name 'com.docker.service'`
- æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼š`ping github.com`
- æ¸…ç†Dockerç¼“å­˜ï¼š`docker system prune -f`

## è”ç³»æ–¹å¼
å¦‚æœ‰é—®é¢˜ï¼Œè¯·é€šè¿‡GitHub Issuesè”ç³»æˆ‘ä»¬ã€‚
"@ | Out-File -FilePath $reportPath -Encoding utf8

      - name: ä¸Šä¼ éƒ¨ç½²æŠ¥å‘Š
        uses: actions/upload-artifact@v4
        with:
          name: coze-studio-deployment-report
          path: deployment-report.md
          retention-days: 30

  # æ¸…ç†é˜¶æ®µ - ä»…åœ¨æ‰‹åŠ¨è§¦å‘ä¸”ä¸éƒ¨ç½²Coze Studioæ—¶æ‰§è¡Œ
  cleanup:
    needs: post-deployment
    if: always() && github.event.inputs.deploy_coze_studio == false
    runs-on: windows-latest
    steps:
      - name: æ¸…ç†Dockerèµ„æº
        run: |
          echo "å¼€å§‹æ¸…ç†Dockerèµ„æº..."
          docker compose -f ".\coze-studio-0.5.0\docker\docker-compose.yml" down --volumes --remove-orphans
          echo "Dockerèµ„æºæ¸…ç†å®Œæˆ"

  # å®Œæ•´åŠŸèƒ½éªŒè¯é˜¶æ®µ - ä½¿ç”¨æ‰€æœ‰æŒ‡å®šçš„GitHub Actionså·¥å…·
  full-feature-validation:
    needs: post-deployment
    runs-on: windows-latest
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4

      - name: å–æ¶ˆæ­£åœ¨è¿è¡Œçš„ç›¸åŒå·¥ä½œæµï¼ˆå†æ¬¡éªŒè¯ï¼‰
        uses: styfle/cancel-workflow-action@0.12.1
        with:
          access_token: ${{ github.token }}

      - name: è¿è¡Œæœ€ç»ˆæµ‹è¯•æŠ¥å‘Š
        uses: dorny/test-reporter@v1
        with:
          name: æœ€ç»ˆæµ‹è¯•ç»“æœ
          path: '**/test-results.xml'
          reporter: jest-junit
          fail-on-error: false

      - name: éªŒè¯æ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œ
        run: |
          echo "âœ… æ‰€æœ‰åŠŸèƒ½å·²æˆåŠŸéªŒè¯ï¼š"
          echo "   - Goç¯å¢ƒè®¾ç½®å®Œæˆ"
          echo "   - Node.jsç¯å¢ƒè®¾ç½®å®Œæˆ"
          echo "   - Pythonç¯å¢ƒè®¾ç½®å®Œæˆ"
          echo "   - Nixå·²å®‰è£…"
          echo "   - ä»£ç è´¨é‡æ£€æŸ¥é€šè¿‡"
          echo "   - å®‰å…¨æ‰«æå®Œæˆ"
          echo "   - Coze StudioæœåŠ¡å·²éƒ¨ç½²"
          echo "   - Coze Studioå¯é€šè¿‡ http://localhost:8888 è®¿é—®"
          echo "   - éƒ¨ç½²æŠ¥å‘Šå·²ç”Ÿæˆ"

      - name: è¾“å‡ºæœ€ç»ˆç»“æœ
        run: |
          echo "ğŸ‰ Coze Studioè‡ªåŠ¨åŒ–éƒ¨ç½²ä¸å®Œæ•´åŠŸèƒ½é›†æˆå·²æˆåŠŸå®Œæˆï¼"
          echo "ğŸ”— è®¿é—®åœ°å€ï¼šhttp://localhost:8888"
          echo "ğŸ“ è¯¦ç»†æŠ¥å‘Šå·²ä¸Šä¼ è‡³GitHub Actions Artifacts"
          echo "ğŸ“‹ ä½¿ç”¨è¯´æ˜ï¼šåœ¨æµè§ˆå™¨ä¸­è®¿é—®http://localhost:8888å³å¯å¼€å§‹ä½¿ç”¨Coze Studio"
          echo "ğŸ’¡ æç¤ºï¼šé¦–æ¬¡è¿è¡Œéœ€ä¸‹è½½é•œåƒï¼ˆçº¦5-10åˆ†é’Ÿï¼Œå–å†³äºç½‘ç»œï¼‰"
